name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions üöÄ
on:
  push:
    branches:
      - main  # Set a branch name to trigger deployment
  pull_request:
    types: [opened, synchronize, reopened]
jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
      steps:
        - run: echo "üéâ The job was automatically triggered by a ${{ github.event_name }} event."
        - run: echo "üêß This job is now running on a ${{ runner.os }} server hosted by GitHub!"
        - run: echo "üîé The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
        - name: Check out repository code
          uses: actions/checkout@v5
        - run: echo "üí° The ${{ github.repository }} repository has been cloned to the runner."
        - run: echo "üñ•Ô∏è The workflow is now ready to test your code on the runner."
        - name: List files in the repository
          run: |
            ls ${{ github.workspace }}
        - run: echo "üçè This job's status is ${{ job.status }}."

        # Artefacts
        - name: Upload a Build Artifact
          uses: actions/upload-artifact@v5.0.0
          with:
            # Artifact name
            name: # optional, default is artifact
              package.jar
            # A file, directory or wildcard pattern that describes what to upload
            path:
              target/*.jar
            # The desired behavior if no files are found using the provided path.
            Available Options:
            warn: Output a warning but do not fail the action
            error: Fail the action with an error message
            ignore: Do not output any warnings or errors, the action does not fail
            if-no-files-found: Minimum 1 day. Maximum 90 days unless changed from the repository settings page. # optional, default is warn
            # Duration after which artifact will expire in days. 0 means using default retention.
            retention-days: # optional
            # The level of compression for Zlib to be applied to the artifact archive. The value can range from 0 to 9: - 0: No compression - 1: Best speed - 6: Default compression (same as GNU Gzip) - 9: Best compression Higher levels will result in better compression, but will take longer to complete. For large files that are not easily compressed, a value of 0 is recommended for significantly faster uploads.
            compression-level: # optional, default is 6
            # If true, an artifact with a matching name will be deleted before a new one is uploaded. If false, the action will fail if an artifact for the given name already exists. Does not fail if the artifact does not exist.
            overwrite: # optional, default is false
            # If true, hidden files will be included in the artifact. If false, hidden files will be excluded from the artifact.
            include-hidden-files: # optional, default is false

        jobs:
          build:
            name: Build and analyze
            runs-on: ubuntu-latest
            steps:
              - uses: actions/checkout@v4
                with:
                  fetch-depth: 0  # Shallow clones should be disabled for a better relevancy of analysis
              - name: Set up JDK 17
                uses: actions/setup-java@v4
                with:
                  java-version: 17
                  distribution: 'zulu' # Alternative distribution options are available.
              - name: Cache SonarQube packages
                uses: actions/cache@v4
                with:
                  path: ~/.sonar/cache
                  key: ${{ runner.os }}-sonar
                  restore-keys: ${{ runner.os }}-sonar
              - name: Cache Maven packages
                uses: actions/cache@v4
                with:
                  path: ~/.m2
                  key: ${{ runner.os }}-m2-${{ hashFiles('**/pom.xml') }}
                  restore-keys: ${{ runner.os }}-m2
              - name: Build and analyze
                env:
                  SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
                run: mvn -B verify org.sonarsource.scanner.maven:sonar-maven-plugin:sonar -Dsonar.projectKey=vincefgt_apiWeb